# Java SpringBoot приложение, выполняющее sql запрос по расписанию

В реализации данного приложения использовалось:
* Фреймворк (SpringBoot)
* База данных (PostgreSQL)
* Взаимодействие с базой данных (jdbcTemplate)
* Логирование (slf4j)
* Планировка выполнения метода с определённым интервалом (Scheduled)

# Использование приложения:


# Настройка SQL запроса "Выборка":

Для того чтобы сформировать SQL запрос на выборку записей подлежащих удалению, требуется настроить следующие параметры:

   * `hours:` - Записи старше x часов. Укажите в эту переменную целое число, чтобы определить интервал времени.

   * `primalKeyColumnDelSqlParam:` - Название столбца являющийся Primary Key

   * `tableNameSqlParam:` - Название таблицы в Базе данных

   * `timeStampOfRecordCreation:` - Название столбца в таблице, в котором содержится временная метка создания записи


# Настройка SQL запроса "Удаление": 

Для того чтобы сформировать SQL запрос на удаление требуется настроить следующие параметры

* `tableDelSqlParam:` Название таблицы в Базе данных

* `primalKeyColumnDelSqlParam:` Название столбца являющийся Primary Key


# Настройка временного интервала 

Операция удаления и выборки работают по расписанию. Т.е. можно определить периоды запуска этих операций:

Для того чтобы изменить время ожидания для выполнения sql запроса Delete, следует установить значение в переменную:

* `deletionPeriodArgument:` - Установите значение в эту переменную в формате cron.

Примеры:

`deletionPeriodArgument:` "0 15 10 * * *" - запускается в 10:15 каждый день. (каждую 0-ю секунду, 15-ю минуту, 10-й час, каждый день). * указывает, что выражение cron
соответствует всем значениям поля. Например, * в поле минут означает каждую минуту.

`deletionPeriodArgument:` "0 0 * * * *" - Каждый час.

`deletionPeriodArgument:` "0 * * * * *" - Каждый минуту.

`deletionPeriodArgument:` "* * * * * *" - Каждый каждую секунду.

т.е: `( * * * * * )`

Первая `*` - секунды (0 - 59)

Вторая `*` - минуты (0 - 59)

Третья `*` - Часы (0 - 23)

Четвёртая `*` - Дни (1 - 31)

Пятая `*` - Месяцы (1 - 12)

Шестая `*` - Дни недели(0 - 7)

Более подробная информация здесь: **https://habr.com/ru/articles/580062/**

Для того чтобы изменить время ожидания для выполнения sql запроса SELECT, следует установить значение в переменную:

* `samplingPeriodArgument:` - Установите значение в эту переменную в формате cron.

Значение в эту переменную устанавливается точно так же, как и в `deletionPeriodArgument`


# Запуск Spring-Boot приложения:

Запустить приложение можно несколькими способами:

Независимо от способа инициализации проекта, вы всегда можете запустить приложение из командной строки командой:
1. Соберите проект командой: mvn package
2. Перейти в папку target
3. Ввести команду: java -jar demo.jar

demo.jar - это jar-ник вашего проекта.


# Поиск логов работы приложения:

Для логирования приложения использовалось **`slf4j`** (Выше об этом было сказано). Все логи приложения вы сможете найти в корневой директории проекта, в папке `logs`. В этой папке содержатся файлы хранящие в себе логи работы приложения. Так же информация содержится в терминале вашей IDE. 
